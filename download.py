import requests


def download(url: str):
    filename: str = url.split("/")[-1]
    try:
        r = requests.get(url, allow_redirects=True)
        open("./output/%s" % filename, 'wb').write(r.content)
    except Exception as ex:
        print(ex, filename)


if __name__ == "__main__":
    countries = [
        {"code": "AFG", "size": 3},
        {"code": "XAD", "size": 2},
        {"code": "ALA", "size": 2},
        {"code": "ALB", "size": 4},
        {"code": "DZA", "size": 3},
        {"code": "ASM", "size": 4},
        {"code": "AND", "size": 2},
        {"code": "AGO", "size": 4},
        {"code": "AIA", "size": 1},
        {"code": "ATA", "size": 1},
        {"code": "ATG", "size": 2},
        {"code": "ARG", "size": 3},
        {"code": "ARM", "size": 2},
        {"code": "ABW", "size": 1},
        {"code": "AUS", "size": 3},
        {"code": "AUT", "size": 4},
        {"code": "AZE", "size": 3},
        {"code": "BHS", "size": 2},
        {"code": "BHR", "size": 2},
        {"code": "BGD", "size": 5},
        {"code": "BRB", "size": 2},
        {"code": "BLR", "size": 3},
        {"code": "BEL", "size": 5},
        {"code": "BLZ", "size": 2},
        {"code": "BEN", "size": 3},
        {"code": "BMU", "size": 2},
        {"code": "BTN", "size": 3},
        {"code": "BOL", "size": 4},
        {"code": "BES", "size": 2},
        {"code": "BIH", "size": 4},
        {"code": "BWA", "size": 3},
        {"code": "BVT", "size": 1},
        {"code": "BRA", "size": 4},
        {"code": "IOT", "size": 1},
        {"code": "VGB", "size": 2},
        {"code": "BRN", "size": 3},
        {"code": "BGR", "size": 3},
        {"code": "BFA", "size": 4},
        {"code": "BDI", "size": 5},
        {"code": "KHM", "size": 5},
        {"code": "CMR", "size": 4},
        {"code": "CAN", "size": 4},
        {"code": "CPV", "size": 2},
        {"code": "XCA", "size": 1},
        {"code": "CYM", "size": 2},
        {"code": "CAF", "size": 3},
        {"code": "TCD", "size": 4},
        {"code": "CHL", "size": 4},
        {"code": "CHN", "size": 4},
        {"code": "CXR", "size": 1},
        {"code": "XCL", "size": 1},
        {"code": "CCK", "size": 1},
        {"code": "COL", "size": 3},
        {"code": "COM", "size": 2},
        {"code": "COK", "size": 1},
        {"code": "CRI", "size": 3},
        {"code": "CIV", "size": 5},
        {"code": "HRV", "size": 3},
        {"code": "CUB", "size": 3},
        {"code": "CUW", "size": 1},
        {"code": "CYP", "size": 2},
        {"code": "CZE", "size": 3},
        {"code": "COD", "size": 4},
        {"code": "DNK", "size": 3},
        {"code": "DJI", "size": 3},
        {"code": "DMA", "size": 2},
        {"code": "DOM", "size": 3},
        {"code": "TLS", "size": 4},
        {"code": "ECU", "size": 4},
        {"code": "EGY", "size": 3},
        {"code": "SLV", "size": 3},
        {"code": "GNQ", "size": 3},
        {"code": "ERI", "size": 3},
        {"code": "EST", "size": 4},
        {"code": "ETH", "size": 4},
        {"code": "FLK", "size": 1},
        {"code": "FRO", "size": 3},
        {"code": "FJI", "size": 3},
        {"code": "FIN", "size": 5},
        {"code": "FRA", "size": 6},
        {"code": "GUF", "size": 3},
        {"code": "PYF", "size": 2},
        {"code": "ATF", "size": 2},
        {"code": "GAB", "size": 3},
        {"code": "GMB", "size": 3},
        {"code": "GEO", "size": 3},
        {"code": "DEU", "size": 5},
        {"code": "GHA", "size": 3},
        {"code": "GIB", "size": 1},
        {"code": "GRC", "size": 4},
        {"code": "GRL", "size": 2},
        {"code": "GRD", "size": 2},
        {"code": "GLP", "size": 3},
        {"code": "GUM", "size": 2},
        {"code": "GTM", "size": 3},
        {"code": "GGY", "size": 2},
        {"code": "GIN", "size": 4},
        {"code": "GNB", "size": 3},
        {"code": "GUY", "size": 3},
        {"code": "HTI", "size": 5},
        {"code": "HMD", "size": 1},
        {"code": "HND", "size": 3},
        {"code": "HKG", "size": 2},
        {"code": "HUN", "size": 3},
        {"code": "ISL", "size": 3},
        {"code": "IND", "size": 4},
        {"code": "IDN", "size": 5},
        {"code": "IRN", "size": 3},
        {"code": "IRQ", "size": 3},
        {"code": "IRL", "size": 2},
        {"code": "IMN", "size": 3},
        {"code": "ISR", "size": 2},
        {"code": "ITA", "size": 4},
        {"code": "JAM", "size": 2},
        {"code": "JPN", "size": 3},
        {"code": "JEY", "size": 2},
        {"code": "JOR", "size": 3},
        {"code": "KAZ", "size": 3},
        {"code": "KEN", "size": 4},
        {"code": "KIR", "size": 1},
        {"code": "XKO", "size": 3},
        {"code": "KWT", "size": 2},
        {"code": "KGZ", "size": 3},
        {"code": "LAO", "size": 3},
        {"code": "LVA", "size": 3},
        {"code": "LBN", "size": 4},
        {"code": "LSO", "size": 2},
        {"code": "LBR", "size": 4},
        {"code": "LBY", "size": 2},
        {"code": "LIE", "size": 2},
        {"code": "LTU", "size": 3},
        {"code": "LUX", "size": 5},
        {"code": "MAC", "size": 3},
        {"code": "MKD", "size": 2},
        {"code": "MDG", "size": 5},
        {"code": "MWI", "size": 4},
        {"code": "MYS", "size": 3},
        {"code": "MDV", "size": 1},
        {"code": "MLI", "size": 5},
        {"code": "MLT", "size": 3},
        {"code": "MHL", "size": 1},
        {"code": "MTQ", "size": 3},
        {"code": "MRT", "size": 3},
        {"code": "MUS", "size": 2},
        {"code": "MYT", "size": 2},
        {"code": "MEX", "size": 3},
        {"code": "FSM", "size": 2},
        {"code": "MDA", "size": 2},
        {"code": "MCO", "size": 1},
        {"code": "MNG", "size": 3},
        {"code": "MNE", "size": 2},
        {"code": "MSR", "size": 2},
        {"code": "MAR", "size": 5},
        {"code": "MOZ", "size": 4},
        {"code": "MMR", "size": 4},
        {"code": "NAM", "size": 3},
        {"code": "NRU", "size": 2},
        {"code": "NPL", "size": 5},
        {"code": "NLD", "size": 3},
        {"code": "NCL", "size": 3},
        {"code": "NZL", "size": 3},
        {"code": "NIC", "size": 3},
        {"code": "NER", "size": 4},
        {"code": "NGA", "size": 3},
        {"code": "NIU", "size": 1},
        {"code": "NFK", "size": 1},
        {"code": "PRK", "size": 3},
        {"code": "XNC", "size": 2},
        {"code": "MNP", "size": 2},
        {"code": "NOR", "size": 3},
        {"code": "OMN", "size": 3},
        {"code": "PAK", "size": 4},
        {"code": "PLW", "size": 2},
        {"code": "PSE", "size": 3},
        {"code": "PAN", "size": 4},
        {"code": "PNG", "size": 3},
        {"code": "XPI", "size": 1},
        {"code": "PRY", "size": 3},
        {"code": "PER", "size": 4},
        {"code": "PHL", "size": 4},
        {"code": "PCN", "size": 1},
        {"code": "POL", "size": 4},
        {"code": "PRT", "size": 4},
        {"code": "PRI", "size": 2},
        {"code": "QAT", "size": 2},
        {"code": "COG", "size": 3},
        {"code": "REU", "size": 3},
        {"code": "ROU", "size": 3},
        {"code": "RUS", "size": 4},
        {"code": "RWA", "size": 6},
        {"code": "BLM", "size": 1},
        {"code": "MAF", "size": 1},
        {"code": "SHN", "size": 3},
        {"code": "KNA", "size": 2},
        {"code": "LCA", "size": 2},
        {"code": "SPM", "size": 2},
        {"code": "VCT", "size": 2},
        {"code": "WSM", "size": 3},
        {"code": "SMR", "size": 2},
        {"code": "STP", "size": 3},
        {"code": "SAU", "size": 2},
        {"code": "SEN", "size": 5},
        {"code": "SRB", "size": 3},
        {"code": "SYC", "size": 2},
        {"code": "SLE", "size": 4},
        {"code": "SGP", "size": 2},
        {"code": "SXM", "size": 1},
        {"code": "SVK", "size": 3},
        {"code": "SVN", "size": 3},
        {"code": "SLB", "size": 3},
        {"code": "SOM", "size": 3},
        {"code": "ZAF", "size": 5},
        {"code": "SGS", "size": 1},
        {"code": "KOR", "size": 3},
        {"code": "SSD", "size": 4},
        {"code": "ESP", "size": 5},
        {"code": "XSP", "size": 1},
        {"code": "LKA", "size": 3},
        {"code": "SDN", "size": 4},
        {"code": "SUR", "size": 3},
        {"code": "SJM", "size": 2},
        {"code": "SWZ", "size": 3},
        {"code": "SWE", "size": 3},
        {"code": "CHE", "size": 4},
        {"code": "SYR", "size": 3},
        {"code": "TWN", "size": 3},
        {"code": "TJK", "size": 4},
        {"code": "TZA", "size": 4},
        {"code": "THA", "size": 4},
        {"code": "TGO", "size": 3},
        {"code": "TKL", "size": 2},
        {"code": "TON", "size": 2},
        {"code": "TTO", "size": 2},
        {"code": "TUN", "size": 3},
        {"code": "TUR", "size": 3},
        {"code": "TKM", "size": 2},
        {"code": "TCA", "size": 2},
        {"code": "TUV", "size": 2},
        {"code": "UGA", "size": 5},
        {"code": "UKR", "size": 3},
        {"code": "ARE", "size": 4},
        {"code": "GBR", "size": 4},
        {"code": "USA", "size": 3},
        {"code": "UMI", "size": 2},
        {"code": "URY", "size": 3},
        {"code": "UZB", "size": 3},
        {"code": "VUT", "size": 3},
        {"code": "VAT", "size": 1},
        {"code": "VEN", "size": 3},
        {"code": "VNM", "size": 4},
        {"code": "VIR", "size": 3},
        {"code": "WLF", "size": 3},
        {"code": "ESH", "size": 2},
        {"code": "YEM", "size": 3},
        {"code": "ZMB", "size": 3},
        {"code": "ZWE", "size": 3}
    ]

    from multiprocessing import Pool
    with Pool(processes=32) as pool:
        pool.map(download, countries)
